@model BostonScientificAVS.Models.workOrderInfo
<partial name="_Loader" />
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Add Bootstrap CSS link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>

<body id="body">
    <div class="container-fluid div-container p-0" id="container">
        <nav class="navbar">
            <div class="dropdown">
                <button class="dropdown-button" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="avatar-image-size" src="~/assets/images/user_avatar.png" />
                    <span class="user-name-text">Hello, @User.Identity.Name | @User.Claims.FirstOrDefault(c => c.Type == "EmpID")?.Value</span>
                    <span class="pack">Cartoning</span>
                </button>
                <div class="dropdown-menu custom-config-dropdown" aria-labelledby="dropdownMenuButton">

                    @if (User.IsInRole("Admin"))
                    {
                        <a class="dropdown-item text-color-blue" asp-area="" asp-controller="Admin" asp-action="Users">Manage Users</a>
                        <a class="dropdown-item text-color-blue" asp-area="" asp-controller="Admin" asp-action="Items">Manage Database</a>
                        <a class="dropdown-item text-color-blue" asp-area="" asp-controller="Admin" asp-action="TransactionTable">Transaction</a>
                        <a class="dropdown-item text-color-blue" asp-area="" asp-controller="Admin" asp-action="Settings">Settings</a>
                    }
                    <a class="dropdown-item text-color-blue" asp-area="" asp-controller="Login" asp-action="Logout">Logout</a>
                </div>
            </div>

            <div class="navigation-back">
                <div class="session-time">
                    <h6 class="session-expires-text text-color-blue">Your Session Expires On</h6>
                    <h6 id="timer" class="session-expire-time text-color-blue"></h6>
                </div>
                <div>
                    <a class="button" href="/Home/WorkOrderBarcodeScan"><img class="back-button-img" src="/assets/images/back-arrow.png" /><span class="back-text">Back</span></a>
                </div>
            </div>

        </nav>
        
        
        <div class="work-order-scan-submit">
            <div class="row inpt1">
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-3">
                            <input id="productLabelInput" class="scan-input" placeholder="Product label" name="input" autocomplete="off" required/>
                            <div id="productLabelInputError" class="text-danger"></div>
                        </div>
                        <div class="col-md-3">
                            <input id="productLabelSpec" class="scan-input" placeholder="Label Spec" name="input1" autocomplete="off" required/>
                            <div id="productLabelInputError1" class="text-danger"></div>
                        </div>
                        <div class="col-md-3">
                            <input id="ifu" class="scan-input" placeholder="Ifu Value" name="input2" autocomplete="off" required/>
                            <div id="productLabelInputError2" class="text-danger"></div>
                        </div>
                        <div class="col-md-3">
                            <button type="submit" class="login-button btn btn-primary" id="submitBtn">
                                <span class="login-text">Scan ID/Submit</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row p-4 w-100">
            <div class="col-md-8">
                <div class="card styled-scrollbar" id="left-part">
                    <div class="card-header bg-card-header">Scanner Details</div>
                    <div class="card-body">
                        <table class="table-borderless TFtable">
                            <tbody>
                                <tr class="bg-row-color">
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld">Database Catalog Number</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-wo-catalog-no-error" class="comparison-lable-text">@Model.DbCatalogNo</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="w-catlognum">WorkOrder Catalog Number</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-db-catalog-num" class="comparison-lable-text">@Model.workOrderCatalogNo</h6>
                                        </div>
                                    </td>                
                                    <td>
                                        <div id="before-scan-catalog">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-catalog">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-catalog">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-catalog">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="workorder-mfg-date">WorkOrder Mfg.Date</h6>
                                        </div>
                                        <div>

                                            <h6 id="wo-mfg-date" class="comparison-lable-text">@Model.workOrderMfgDate</h6>
                                        </div>
                                    </td>
                                    <td>
                                    </td>
                                    <td>
                                        <div id="before-scan-wo-mfg-date">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-wo-mfg-date">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-wo-mfg-date">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-wo-mfg-date">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr class="bg-row-color">
                                    <td>
                                        <div class="comparison-lable-text bld" id="shelf-life">Shelf-Life Days</div>
                                        <div>
                                            <h6 id="fail-shelf-life-by-error" class="comparison-lable-text">@Model.shelflife</h6>
                                        </div>
                                    </td>
                                    <td>
                                    </td>
                                    <td>
                                        <div id="before-shelflife">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size">
                                        </div>
                                        <div class="temp-display" id="during-shelflife">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-shelflife">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-shelflife">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" >Calculate Use by Date</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-product-use-by" class="comparison-lable-text">xxxxxxxxxxx</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-useby">Carton Label Useby Date</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-calc-use-by" class="comparison-lable-text">xxxxxxxxxxx</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div id="before-scan-use-date">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-use-date">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-use-date">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-use-date">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr class="bg-row-color">
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld">Work Order Lot No</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-wo-lot-no" class="comparison-lable-text">@Model.workOrderLotNo</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-carton">Carton Lot Number</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-carton-lot-no" class="comparison-lable-text">@Model.CartonLotNo</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div id="before-scan-lot-no">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-lot-no">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-lot-no">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-lot-no">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld">Carton Lot Number</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-carton-lot-no-1" class="comparison-lable-text">@Model.CartonLotNo</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-lotnum">Production Lot Number</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-product-lot-no1" class="comparison-lable-text">xxxxxxxxxxx</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div id="before-scan-lot-no1">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-lot-no1">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-lot-no1">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-lot-no1">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>

                                <tr class="bg-row-color">
                                     <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld">Database GTIN</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-db-gtin" class="comparison-lable-text">@Model.Dbgtin</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-gtin">Carton Label GTIN</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-label-gtin1" class="comparison-lable-text">@Model.Cartongtin</h6>
                                        </div>
                                    </td>             
                                    <td>
                                        <div id="before-scan-gtin">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-gtin">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-gtin">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-gtin">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld">Database Label Specification</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-product-label-spec" class="comparison-lable-text">@Model.Dbspec</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-labelspec">Carton Label Specification</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-db-label-spec" class="comparison-lable-text">@Model.CartonLabelspec</h6>
                                        </div>
                                    </td>                        
                                    <td>
                                        <div id="before-scan-label-spec">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-label-spec">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-label-spec">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-label-spec">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr class="bg-row-color">
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld">Carton Label Useby Date</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-calc-use-by-1" class="comparison-lable-text">@Model.Carton_Use_By</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-useby1">Product Label Useby Date</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-product-useby" class="comparison-lable-text">xxxxxxxxxxx</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div id="before-scan-product-useby">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-product-useby">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-product-useby">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-product-useby">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="fail-db-ifu">Database IFU</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-product-db-ifu" class="comparison-lable-text">@Model.ifu</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-ifu">Carton IFU</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-ifu" class="comparison-lable-text">xxxxxxxxxxx</h6>
                                        </div>
                                    </td>                                
                                    <td>
                                        <div id="before-scan-ifu">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-ifu">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-ifu">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-ifu">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                                <tr class="bg-row-color">
                                     <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld">Carton Label GTIN</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-db-gtin-2" class="comparison-lable-text">@Model.Cartongtin</h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <h6 class="comparison-lable-text bld" id="p-gtin-1">Product Label GTIN</h6>
                                        </div>
                                        <div>
                                            <h6 id="fail-label-gtin2" class="comparison-lable-text">xxxxxxxx</h6>
                                        </div>
                                    </td>             
                                    <td>
                                        <div id="before-scan-gtin-1">
                                            <img src="/assets/images/before-scanning.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="during-scan-gtin-1">
                                            <img src="/assets/images/scanning-stage-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-pass-gtin-1">
                                            <img src="/assets/images/after-scanned-pass-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                        <div class="temp-display" id="after-scan-fail-gtin-1">
                                            <img src="/assets/images/after-scanned-fail-icon.png" class="scanning-stage-img-size" />
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row" id="bottom">
                    <div class="col sm-card total">
                        <div>Total</div>
                        <div id="total-val" class="data-val-text">@Model.totalCount</div>
                    </div>
                    <div class="col sm-card passed">
                        <div>Passed</div>
                        <div id="total-passed-val" class="data-val-text">@Model.passedCount</div>
                    </div>
                    <div class="col sm-card failed ">
                        <div>Failed</div>
                        <div id="total-failed-val" class="data-val-text">@Model.failedCount</div>
                    </div>
                    <div class="col sm-card scanned">
                        <div>Rescanned</div>
                        <div id="total-rescanned-val" class="data-val-text">@Model.scannedCount</div>
                    </div>

                </div>
            </div>
            <div class="col-md-4">
                <div class="status-wrapper p-2 bg-light-blue" id="before-side-scan">
                    <img src="/assets/images/scanning-temp-image.png" class="scan-img">
                    <div class="scan-container">
                        Scan Product Label
                    </div>
                    <div class="work-btn" id="before-workorder">New Work Order</div>
                </div>
                <div class="status-wrapper p-2 bg-light-blue" id="ifu-scan">
                    <img src="/assets/images/scanning-temp-image.png" class="scan-img">
                    <div class="scan-container">
                        Scan IFU
                    </div>
                    <div class="work-btn" id="ifu-workorder">New Work Order</div>
                </div>

                <div class="status-wrapper p-2 bg-light-blue" id="after-fail-side-scan">
                    <div class="status-container failed-status">
                        Failed
                    </div>
                    <div class="scan-container">
                        Scan Product Label
                    </div>
                    <div><a asp-area="" asp-controller="Home" asp-action="WorkOrderBarcodeScan" id="after-pass-workorder" class="work-btn">New Work Order</a></div>
                    <div class="work-btn-1" id="rescanBtn">Rescan</div>
                </div>


                <div class="status-wrapper p-2 bg-light-blue" id="after-success-side-scan">
                    <div class="status-container passed-status">
                        Passed
                    </div>
                    <div class="scan-container">
                        Scan Product Label
                    </div>
                    <a asp-area="" asp-controller="Home" asp-action="WorkOrderBarcodeScan" id="after-pass-workorder" class="work-btn">New Work Order</a>
                </div>
            </div>

            <div id="popupContainer1">
                <div id="popupContent1">
                    <a class="close" href="javascript:void(0);" onclick="closePopup()">X</a>
                    <img src="~/assets/images/Barcode image 2.png" alt="Barcode Icon" id="scan-image">
                    <h5 class="supr-txt">Place Your Supervisor Badge</h5>
                    <h5 id="under">under the scanner</h5>
                    <input id="supervisorInput1" placeholder="Super Visor Id" name="supervisorInput1" autocomplete="off" />
                    <br />
                    <button id="redButton" class="redButton" onclick="redbutton('supervisorInput1')">Continue</button>
                    <br />
                    <span class="error-message text-danger"></span>
                </div>
            </div>
            <div id="popupContainer">
                <div id="popupContent">
                    <a class="close" href="javascript:void(0);" onclick="closePopup()">X</a>
                    <img src="~/assets/images/Barcode image 2.png" alt="Barcode Icon" id="scan-image">
                    <h5 class="supr-txt">Place Your Supervisor Badge</h5>
                    <h5 id="under">under the scanner</h5>
                    <input id="supervisorInput" placeholder="Super Visor Id" name="supervisorInput" autocomplete="off" />
                    <br />
                    <button id="greenButton" class="greenButton" onclick="greenButton('supervisorInput')">Continue</button>
                    <br />
                    <span class="error-message text-danger"></span>
                </div>
            </div>
            <div id="toast" style="visibility: hidden;">
                User time limit reached, it will automatically logout.
            </div>
        </div>
    </div>
</body>
<style>
    .p-4 {
    padding: 0.5rem!important;
}

  .work-btn{
    text-decoration:none;
  }
  #rescanBtn {
      text-decoration:none;
  }

  .work-btn-1 {
  display: inline-block;
  padding: 10px 20px; /* Adjust padding as needed */
  background-color: #FFB246;
  color: #FFF;
  text-align: center;
  font-size: 16px;
  font-weight: bold;
  text-decoration: none;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  /* Additional styles (hover, focus, etc.) can be added for better user interaction */
}

.work-btn-1:hover {
        background-color: #FFB246; /* Change color on hover as desired */
}

    body {
        background: #f9fafb;
        overflow: hidden;
    }

    .navbar {
        color: #fff;
        /* background: #05356f !important; */
        border-radius: 0;
        border: none;
        /* box-shadow: 0 0 4px rgba(0, 0, 0, 0.1); */
    }

    .navbar {
        height: 80px;
    }

    .nav-text {
        color: #003C71;
        text-align: center;
        font-family: Inter;
        font-size: 24px;
        font-style: normal;
        font-weight: 500;
        line-height: 150%; /* 36px */
        letter-spacing: -0.456px;
    }

    .navbar .navbar-brand {
        color: #efe5ff;
        padding-left: 0;
        font-size: 24px;
    }

        .navbar .navbar-brand i {
            font-size: 25px;
            margin-right: 5px;
        }

    .nav-logo {
        width: 61.6px;
        height: 32px;
        object-fit: contain;
    }

    .applied-logo {
        width: 32px;
        height: 30px;
        margin: 5px 0 0 0;
        object-fit: contain;
    }

    .nav-wrapper::before {
        padding-left: .5rem;
        padding-right: 0.25rem;
        color: #003C71;
        content: "|";
        font-weight: 400;
    }

    .btn-dark-blue {
        /* border-radius: 10px; */
        background: #003C71;
        color: #fff;
        padding: 10px 20px;
    }

    .btn-outline-dark-blue {
        border-color: #003C71;
        background: #fff;
        color: #003C71;
        padding: 1px 10px;
    }

    .fs-6 {
        font-size: 0.75rem;
    }


    .div-container {
        margin-top: 20px;
        height: calc(100vh - 55px);
        overflow-y: hidden;
        overflow-x: hidden;
        background-color: #f9fafb;
    }

    .banner-wrapper {
        position: relative;
        height: 100%;
        width: 100%;
    }

    .wrap-center {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .outer {
        /* position: relative;
      height: 100%; */
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 120px;
    }


    .inner-text {
        font-size: 30px;
        color: #000;
        text-align: center;
        font-family: Inter;
    }

    .blue-text {
        color: #003C71
    }

    .btn-wrap {
        position: absolute;
        bottom: 5%;
        right: 0;
        margin: 10px;
    }

    .btn-error {
        /* border-radius: 10px; */
        background: #FFDADA;
        color: #F00;
    }

    .styled-scrollbar {
        overflow: auto;
    }

        .styled-scrollbar::-webkit-scrollbar {
            width: 0.4rem;
        }

        .styled-scrollbar::-webkit-scrollbar-track {
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        }

        .styled-scrollbar::-webkit-scrollbar-thumb {
            background-color: darkgrey;
            outline: 1px solid slategrey;
        }

    

    .bg-green {
        background: #BAFFCD !important;
    }

    .bg-red {
        background: #FFCACA !important;
    }

    .bg-card-header {
        background: #003C71;
        color: #fff;
    }

    .bg-card-body {
        background: #EAF5FF;
        padding: unset;
    }

    .bg-light-blue {
        background: #EAF5FF;
    }

    .status-wrapper {
    height: 56%;
}

    .status-container {
        padding: 35px 20px;
        margin: 80px 20px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        /* font-family: Inter; */
        font-size: 34px;
        font-weight: 600;
    }

    .passed-status {
        background: #BAFFCD;
        color: #00AD30;
        margin-bottom: 35px;
        height: 28%;
    }

    .failed-status {
        background: #FFCACA;
        color: #FF0000;
        height: 23%;
       margin-top: 10px;
    }

    .scan-container {
        display: flex;
        /* width: 387px; */
        padding: 26px 39px;
        justify-content: center;
        align-items: center;
        border-radius: 10px;
        background: #C5C5C5;
        color: #FFF;
        text-align: center;
        /* font-family: Inter; */
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        border-radius: 10px;
        margin-bottom: 20px;
    }

    .work-btn {
        display: flex;
        /* width: 405px; */
        /* height: 25%; */
        padding: 20px 24px;
        justify-content: center;
        align-items: center;
        gap: 10px;
        background: #003C71;
        color: #FFF;
        text-align: center;
        /* font-family: Inter; */
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        border-radius: 10px;
        margin: 10px 0;
    }

    .sm-card {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        border-radius: 10px;
        margin: 0 2px;
        color: #003C71;
        font-weight: 600;
    }

    .total {
        border-radius: 10px;
        background: #EAF5FF;
    }

    .failed {
        border-radius: 10px;
        background: #FFCACA;
    }

    .passed {
        border-radius: 10px;
        background: #BAFFCD;
    }

    .scanned {
        border-radius: 10px;
        background: #FFE9CB;
    }

   .scan-img {
    margin-left: 30px;
    width: 73%;
    height: 40%;
}

   .pack {
    position: absolute;
    top: 32px;
    left: 52px;
    color: #003C71;
}


 /* Define the background color for all the ODD background rows */
        .TFtable tr:nth-child(odd) {
            background: #EAF5FF !important;
        }

        /* Define the background color for all the EVEN background rows */
        .TFtable tr:nth-child(even) {
            background: #ffffff !important;
        }

   #left-part {
    height: 45%;
    overflow-y: auto;
}
     #bottom{
        margin:10px 0;
    }

    #toast {
        max-width: 300px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 16px;
        position: fixed;
        z-index: 1;
        left: 50%;
        bottom: 30px;
        transform: translateX(-50%);
    }

    .scanning-text-2 {
    color: white;
    font-size: 28px;
    font-weight: 700;
    text-align: center;
    padding: 40px;
   }

    .disabled {
        pointer-events: none; /* Prevent interaction */
        cursor: not-allowed; /* Change cursor to not-allowed */
    }

    .rescn {
        position: absolute;
        top: 65%;
    }

    #next-scan-button a {
        text-decoration: none;
        color: #FFF;
    }

    #next-scan-button1 a {
        text-decoration: none;
        color: #FFF;
    }

    .brdr-bottom {
        border-bottom: 1px solid black;
        margin-bottom: 6px;
    }

    .packaging {
        margin-bottom: 8px;
        font-weight: 600;
        font-size: 20px;
    }

    #error {
        height: 45%;
        display: flex;
    }

    .bottom {
        margin-top: 5px;
    }

    .full-div {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        height: 70%;
    }


    #first-column {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }


    .scn {
        height: 57%;
        display: flex;
        background-color: aliceblue;
        padding: 0.5rem;
    }

    #under {
        margin-left: 38px;
        text-align: center;
        font-size: 23px;
        font-weight: 400;
    }

    #scan-image {
        width: 313px;
        margin-left: 81px;
    }

    #supervisorInput {
        margin-left: 152px;
        width: 151px;
        height: 43px;
        border-radius: 10px;
        border: 1px solid;
        font-size: 20px;
        text-align: center;
    }

    #supervisorInput1 {
        margin-left: 152px;
        width: 151px;
        height: 43px;
        border-radius: 10px;
        border: 1px solid;
        font-size: 20px;
        text-align: center;
    }

    #spr-err-txt {
        margin-left: 96px
    }

    hr {
        color: black;
    }

    .next-button-align {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .approve-button {
        display: block;
        width: 150px;
        height: 60px;
        background: #FFB246;
        padding: 10px;
        text-align: center;
        border-radius: 12px;
        color: white;
        font-weight: bold;
        line-height: 40px;
        margin-bottom: 17px;
        /* margin: auto; */
        text-decoration: none;
    }

    .reject-button {
        display: block;
        width: 155px;
        height: 56px;
        margin-right: -10px;
        background: #FF0000;
        padding: 10px;
        text-align: center;
        border-radius: 12px;
        color: white;
        font-weight: bold;
        line-height: 40px;
        text-decoration: none;
    }



    .next-img {
        height: 24px;
        width: 24px;
        vertical-align: -5px;
    }

    .comparison-lable-text {
        color: black;
    }

    .data-table {
        display: flex;
        justify-content: space-around;
    }

    .data-table-pass {
        display: flex;
        padding-left: 42px;
        gap: 250px;
    }

    .data-table-pass-supervisor {
        display: flex;
    }

    .mismatch-text {
        color: #003C71;
        font-size: 20px;
        font-weight: 700;
        padding-bottom: 10px;
    }

    supervisor-container {
        width: 100%;
        display: flex;
        justify-content: center;
        padding-top: 14px;
        gap: 20px;
    }

    .data-comparison {
        padding: 4px;
        width: 100%;
    }


    .data-comparison-pass {
        height: 319px;
        background-color: #EAF5FF;
        border-radius: 10px;
    }

    .navigation-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
        background: transparent !important;
    }

    .temp-display {
        display: none;
    }

    .pt-15 {
        padding-top: 15px;
    }


    .container-fluid {
        height: 100vh;
    }

    .image-div {
        position: relative;
        float: right;
    }

    .heading {
        display: flex;
        gap: 307px;
        justify-content: center;
    }

    .image-size {
        width: 560px;
        height: 52px;
    }

    .heading-text {
        font-size: 27px;
        vertical-align: -12px;
    }


    .p-17 {
        padding: 17px;
    }

    .mid-content {
        display: flex;
        justify-content: center;
    }

    #left-content {
        /* max-height: 116px; */
        display: flex;
        flex-direction: column;
        width: 746px;
        color: red;
    }


    .right-content {
        /* margin-top: 79px; */
        width: 476px;
        color: blue;
        padding-left: 10px;
    }

    .count-data {
        min-height: 30%;
        background-color: #003C71;
        border-radius: 10px;
    }




    .center {
        background-color: aliceblue;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .center1 {
        justify-content: center;
        align-items: center;
    }

    .processing-lot-text {
        padding-top: 5px;
        padding-left: 17px;
        font-size: 17px;
        font-weight: 300;
        color: white;
    }


    .processing-lot-no {
        font-weight: 700;
    }

    .p-10 {
        padding: 1px;
    }

    .data-stat {
        margin-left: 12px;
        width: 96%;
        display: flex;
        gap: 10px;
        justify-content: center;
        height: 86%;
    }


    .data-card {
        margin-left: 6px;
        padding: 7px;
        width: 93%;
        height: 87%;
        border-radius: 5px;
    }


    .data-heading {
        height: 14px;
        display: flex;
        justify-content: space-between;
    }
    .data-val {
        height: 61%;
    }


    .data-heading-text {
        color: #003C71;
        font-size: 21px;
        font-weight: 700;
    }

    .data-val-text {
        font-size: 36px;
        font-weight: 600;
        color: #003C71;
        text-align: end;
    }

    .pass-icon {
        width: 21px;
        height: 21px;
    }

    .barcode-img-size {
        height: 90%;
        width: 100%;
        vertical-align: -17px;
        object-fit: contain;
        background-color: aliceblue;
    }

    .barcode-img-size1 {
        height: 52%;
        width: 35%;
        display: flex;
        margin-left: 100px;
    }


    .scanning-icon {
        max-height: 300px;
        display: flex;
        justify-content: space-between;
        padding-top: 10px;
    }

    .scanning-instruction {
        width: 363px;
        /*background-color: #C5C5C5;*/
        display: flex;
        align-items: center;
        border-radius: 10px;
    }

    .scanning-failed-instruction {
        width: 363px;
        background-color: #003C71;
        display: flex;
        align-items: center;
        border-radius: 10px;
    }

    .scanning-text-1 {
        color: white;
        font-size: 28px;
        font-weight: 700;
        text-align: center;
    }

    .scanning-text-2 {
        color: white;
        font-size: 22px;
        font-weight: 700;
        text-align: center;
        padding: 21px;
    }

    .lbl {
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .lbl1 {
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }


    .scanning-text-container {
        margin: auto;
    }

    .scanning-text-container1 {
        padding-top: 79px;
        text-align: center;
    }

    .product-spec {
        display: flex;
        padding-left: 20px;
        margin-bottom: 24px;
    }



    .scanning-stage-img-size {
        height: 50px;
        width: 50px;
    }

    .product-spec-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 13px;
        padding-bottom: 20px;
        border-radius: 10px;
        justify-content: center;
    }


    .right-scan {
        margin-bottom: 12px;
        background-color: aliceblue;
    }

    .product-spec-text {
        font-size: 25px;
        font-weight: 600;
        color: black;
        padding-top: 5px;
    }

    .loading-and-nav {
        position: relative;
        display: flex;
        padding-top: 10px;
        justify-content: center;
        bottom: 17px;
    }

    bar-scn {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .left-part {
        border: 1px solid;
        border-radius: 7px;
        display: flex;
        align-items: center;
        height: 47px;
    }



    .right-part {
        /* padding-top: 26px; */
        width: 473px;
        padding-left: 10px;
        margin-top: 13px;
    }

    .right-part-container {
        background-color: #C5C5C5;
        height: 51px;
        border-radius: 10px;
    }

    .scanning-loading-text {
        font-size: 24px;
        font-weight: 700;
        color: #003C71;
        padding-left: 15px;
        padding-top: 4px;
    }

    .scan-input {
        height: 44px;
        border-radius: 10px;
        border: 1px solid;
        font-size: 20px;
        text-align: center;
    }

   #productLabelInput {
    border-radius: 7px;
    width: 103%;
    margin-left: 12px;
}


   #productLabelSpec {
    border-radius: 7px;
    width: 83%;
    margin-left: 13px;
}
 #ifu {
margin-left: -19px;
width: 76%;
}

    #submitBtn {
        border-radius: 8px;
        display: block;
        margin-left: -36px;
        height: 100%;
    }


    .inpt1 {
        margin-bottom: 7px
    }

    .scanning-next-text {
        padding-left: 16px;
        font-size: 20px;
        font-weight: 500;
        color: white;
        text-align: center;
    }

    .pr-70 {
        padding-right: 70px;
    }



    .left-part-pass {
        width: 772px;
        height: 54px;
        border-radius: 10px;
        background-color: #00E13F;
    }

    .left-part-fail {
        margin-top: 5px;
        height: 44px;
        border-radius: 9px;
        background-color: #FF0000;
    }

    .pass-text {
        font-size: 24px;
        font-weight: 600;
        color: white;
        padding-left: 15px;
        padding-top: 7px;
    }

    .approve-text {
        font-size: 24px;
        font-weight: 600;
        color: black;
    }

    .reject-text {
        font-size: 15px;
        font-weight: 600;
        color: white;
    }

    .navigation-header-result {
        /* padding: 20px; */
        display: flex;
        justify-content: center;
        gap: 634px;
        padding-left: 0px;
        padding-top: 10px;
    }

    .temp-flex {
        display: flex;
        justify-content: center;
        gap: 10px;
        padding-bottom: 10px;
        align-items: center;
    }

    /* Styles for the popup container */
    #popupContainer {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }

    #popupContainer1 {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }

  

    #popupContent1 {
    width: 477px;
    position: fixed; /* Set the position to fixed */
    top: 50%; /* Set the top to 50% */
    right: 0; /* Set the right position to 0 */
    transform: translateY(-50%); /* Align vertically using transform */
    background-color: #fff;
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

 #popupContent {
    width: 477px;
    position: fixed; /* Set the position to fixed */
    top: 50%; /* Set the top to 50% */
    right: 0; /* Set the right position to 0 */
    transform: translateY(-50%); /* Align vertically using transform */
    background-color: #fff;
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

    /* Style for the green button inside the popup */
    #greenButton {
        background-color: green;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-left: 180px;
        margin-top: 14px;
        margin-bottom: 8px;
    }

    #redButton {
        background-color: green;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-left: 180px;
        margin-top: 14px;
        margin-bottom: 8px;
    }

    .supr-txt {
        display: flex;
        font-weight: 400;
        align-items: center;
        margin-left: 87px;
        font-size: 25px;
    }

    #total {
        background-color: #EAF5FF;
    }

    #pass {
        background-color: #BEF8A7;
    }

    #fail {
        background-color: #F09785;
    }

    #rescan {
        background-color: #F9EFC6;
    }

    .border {
        border: 2px solid #0AC5F3;
    }

    #before-scan-text {
        height: 316px !important;
        margin-bottom: 29px;
    }

    #ifu-scan-text {
        height: 263px !important;
    }

    #after-scan-fail-text {
        min-height: 168px !important;
        width: 386px;
        margin-top: 37px;
        margin-left: 8px;
    }

    #after-scan-fail-text1 {
        height: 303px !important;
        width: 321px;
        margin-left: 35px;
    }


    .close {
        float: right;
        text-decoration: none;
        color: #333;
        font-weight: 700;
    }

    #p-dls {
        margin-top: 7px;
        background-color: aliceblue;
        font-size: 20px;
        min-height: 62%;
        width: 100%;
        font-weight: bolder;
    }

    .gap {
        margin-top: 15px;
    }
    .bld{
        font-weight:bolder;
    }

    .data-from-db {
        margin-left: 70px;
    }
    .gap1{
        margin-top:34px;
    }

    table {
        width:100%;
    }
     .dropdown-button {
    width: 211px;
    height: 54px;
    border: none;
    background-color: white;
    white-space: nowrap; /* Added to remove white space */
}


</style>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript">
    let inPassScenario = false;
    let inFailScenario = false;
    let responseData = null;
    let IFUScanActive = false;
    let superVisorInput = false;
    var toastVisible = true; // Initially set to true so the message is not displayed
    var timerHasStarted = false;
    var intervalId;
    var isPaused = false;
    var pauseDuration = 60;

    document.getElementById("ifu").disabled = true;
    document.getElementById("after-fail-side-scan").style.display = "none";
    document.getElementById("after-success-side-scan").style.display = "none";
    document.getElementById("after-pass-workorder").style.display = "none";
    document.getElementById("ifu-scan").style.display = "none";
    document.getElementById("popupContainer1").style.display = "none";
    document.getElementById("popupContainer").style.display ="none";

    //document.getElementsByClassName('temp-supervisor-call-button')[0]
    //    .addEventListener('click', function (event) {
    //        showPopup();
    //    });
    //document.getElementsByClassName('temp-supervisor-call-button1')[0]
    //    .addEventListener('click', function (event) {
    //        showPopup1();
    //    });



    //document.getElementsByClassName('temp-reset-button')[0]
    //    .addEventListener('click', function (event) {
    //        var targetUrl = "/SaveWorkOrderBarcode";
    //        window.location.href = targetUrl;

    //    });

    document.addEventListener('DOMContentLoaded', function () {
        // Access the TempData value and store it in a JavaScript variable
        var resultData = @Html.Raw(Json.Serialize(TempData["woi"]));
        console.log(resultData);
     
        // Compare the values and update the HTML elements based on the comparison
        if (resultData) {
            var cartonGtin = resultData.cartongtin;
            var dbGtin = resultData.dbgtin;
            var wolotNo = resultData.workOrderLotNo;
            var cartonlotNo = resultData.cartonLotNo;
            var cartonlabelspec = resultData.cartonLabelspec;
            var dblabelspec = resultData.dbspec;
            var cartonuseby = resultData.carton_Use_By;
            var calculateuseby = resultData.calculateuseby;
            var wocatalognum = resultData.workOrderCatalogNo;
            var dbcatalognum = resultData.dbCatalogNo;


            // Update the content of the comparison labels
            document.getElementById('fail-label-gtin1').innerHTML = cartonGtin;
            document.getElementById('fail-db-gtin').innerHTML = dbGtin;
            document.getElementById('fail-wo-lot-no').innerHTML = wolotNo;
            document.getElementById('fail-carton-lot-no').innerHTML = cartonlotNo;
            document.getElementById('fail-db-label-spec').innerHTML = cartonlabelspec;
            document.getElementById('fail-product-label-spec').innerHTML = dblabelspec;
            document.getElementById('fail-calc-use-by').innerHTML = cartonuseby;
            document.getElementById('fail-product-use-by').innerHTML = calculateuseby;
            document.getElementById('fail-db-catalog-num').innerHTML = wocatalognum;
            document.getElementById('fail-wo-catalog-no-error').innerHTML = dbcatalognum;

            // Compare values and show/hide elements based on comparison
            if (cartonGtin === dbGtin) {
                // Display pass icons and hide fail icons
                document.getElementById('before-scan-gtin').style.display ='none';
                document.getElementById('after-scan-pass-gtin').style.display = 'block';

            } else {
                document.getElementById('p-gtin').style.color="red";
                document.getElementById('fail-label-gtin1').style.color = "red";
                document.getElementById('before-scan-gtin').style.display ='none';
                document.getElementById('after-scan-fail-gtin').style.display = 'block';
            }
            if (wolotNo === cartonlotNo) {
                document.getElementById('before-scan-lot-no').style.display = 'none';
                document.getElementById('after-scan-pass-lot-no').style.display = 'block';
            }

            else {
                document.getElementById('p-carton').style.color="red";
                 document.getElementById('fail-carton-lot-no').style.color="red";
                 document.getElementById('before-scan-lot-no').style.display = 'none';
                document.getElementById('after-scan-fail-lot-no').style.display = 'block';
            }
            if (cartonlabelspec === dblabelspec) {
                document.getElementById('before-scan-label-spec').style.display = 'none';
                document.getElementById('after-scan-pass-label-spec').style.display = 'block';
            }
            else {
                document.getElementById('p-labelspec').style.color ="red";
                document.getElementById('fail-db-label-spec').style.color="red";
                document.getElementById('before-scan-label-spec').style.display = 'none';
                document.getElementById('after-scan-fail-label-spec').style.display = 'block';
            }
            if (cartonuseby === calculateuseby) {
                document.getElementById('before-scan-use-date').style.display = 'none';
                document.getElementById('after-scan-pass-use-date').style.display = 'block';
            }
            else {
                document.getElementById('p-useby').style.color="red";
                document.getElementById('fail-calc-use-by').style.color = "red";
                document.getElementById('before-scan-use-date').style.display = 'none';
                document.getElementById('after-scan-fail-use-date').style.display = 'block';

            }
            if (wocatalognum === dbcatalognum) {
                document.getElementById('before-scan-catalog').style.display = 'none';
                document.getElementById('after-scan-pass-catalog').style.display = 'block';
            }
            else {
                document.getElementById('w-catlognum').style.color = "red";
                document.getElementById('fail-db-catalog-num').style.color="red";
                document.getElementById('before-scan-catalog').style.display = 'none';
                document.getElementById('after-scan-fail-catalog').style.display = 'block';
            }

            if (cartonGtin !== dbGtin || wolotNo !== cartonlotNo || cartonlabelspec !== dblabelspec || cartonuseby !== calculateuseby || wocatalognum !== dbcatalognum) {
            console.log("Error Div Condition checking");
            document.getElementById("container").style.backgroundColor = "#FFCACA";
            document.getElementById("body").style.backgroundColor = "#FFCACA";
            document.getElementsByClassName('dropdown-button')[0].style.backgroundColor="#FFCACA";
            document.getElementById("before-side-scan").style.display="none";
            document.getElementById("before-workorder").style.display="none";
            document.getElementById("after-fail-side-scan").style.display = "block";
            document.getElementById("after-pass-workorder").style.display = "block";
            document.getElementById("rescanBtn").style.display = "block";
            showPopup1();
          }

            document.getElementById('before-scan-wo-mfg-date').style.display = 'none';
            document.getElementById('after-scan-pass-wo-mfg-date').style.display = 'block';
            document.getElementById('before-shelflife').style.display = 'none';
            document.getElementById('after-scan-pass-shelflife').style.display = 'block';



        } else {
            // Handle the case when TempData does not contain the expected data
            console.log('TempData does not contain the expected data.');
        }
    });




    function beforeToDuringScan() {
        document.getElementById("before-scan-lot-no1").style.display = "none";
        document.getElementById("during-scan-lot-no1").style.display = "block";
        document.getElementById("before-scan-product-useby").style.display = "none";
        document.getElementById("during-scan-product-useby").style.display = "block";
        document.getElementById("before-scan-ifu").style.display = "none";
        document.getElementById("during-scan-ifu").style.display = "block";
        document.getElementById("before-scan-gtin-1").style.display = "none";
        document.getElementById("during-scan-gtin-1").style.display = "block";
        document.getElementById("popupContainer1").style.display = "none";
    }

    function duringToScanPass() {
        inPassScenario = true;
        document.getElementById("during-scan-lot-no1").style.display = "none";
        document.getElementById("after-scan-pass-lot-no1").style.display = "block";
        document.getElementById("during-scan-product-useby").style.display ="none";
        document.getElementById("after-scan-pass-product-useby").style.display ="block";
        document.getElementById("during-scan-ifu").style.display = "none";
        document.getElementById("after-scan-pass-ifu").style.display ="block";
        document.getElementById("popupContainer1").style.display = "none";
        document.getElementById("container").style.backgroundColor="#BAFFCD";
        document.getElementById("body").style.backgroundColor="#BAFFCD";
        document.getElementsByClassName('dropdown-button')[0].style.backgroundColor ="#BAFFCD";
        document.getElementById("ifu-scan").style.display = "none";
        document.getElementById("ifu-workorder").style.display = "none";
        document.getElementById("after-success-side-scan").style.display="block";
        document.getElementById("after-pass-workorder").style.display="block";
       
    }

    function duringToScanFail(response) {
        document.getElementById("popupContainer1").style.display = "none";
        document.getElementById("scanning-icon-div").style.backgroundColor = "#FFB5B5";

        document.getElementById("before-scan-text").style.display = "none";
        document.getElementById("after-scan-fail-text").style.display = "flex";

        document.getElementById("before-scan-image").style.display = "none";
        document.getElementById("after-scan-fail-image").style.display = "block";

        document.getElementById("during-scan-dbgtin-no").style.display = "none";
        if (response.mismatches.gtinmismatch) {
            document.getElementById("after-scan-fail-dbgtin-no").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-dbgtin-no").style.display = "block";
        }
        document.getElementById("during-scan-gtin").style.display = "none";
        if (response.mismatches.gtinmismatches) {
            document.getElementById("after-scan-fail-gtin").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-gtin").style.display = "block";
        }

        document.getElementById("during-scan-lot-no").style.display = "none";
        if (response.mismatches.lotNoMismatch) {
            document.getElementById("after-scan-fail-lot-no").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-lot-no").style.display = "block";
        }
        document.getElementById("during-scan-label-spec").style.display = "none";
        if (response.mismatches.labelSpecMismatch) {
            document.getElementById("after-scan-fail-label-spec").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-label-spec").style.display = "block";
        }

        document.getElementById("during-scan-use-date").style.display = "none";
        if (response.mismatches.calculatedUseByMismatches) {
            document.getElementById("after-scan-fail-use-date").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-use-date").style.display = "block";
        }

        document.getElementById("during-scan-catalog").style.display = "none";
        if (response.mismatches.catalogNumMismatch) {
            document.getElementById("after-scan-fail-catalog").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-catalog").style.display = "block";
        }
        document.getElementById("during-scan-lot-no1").style.display = "none";
        if (response.mismatches.lotNumberMisMatch) {
            document.getElementById("after-scan-fail-lot-no1").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-lot-no1").style.display = "block";
        }
        document.getElementById("during-scan-ifu").style.display = "none";
        if (response.mismatches.ifumismatches) {
            document.getElementById("after-scan-fail-ifu").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-ifu").style.display = "block";
        }
        document.getElementById("during-scan-product-useby").style.display = "none";
        if (response.mismatches.calculatedUseByMismatch) {
            document.getElementById("after-scan-fail-product-useby").style.display = "block";
        } else {
            document.getElementById("after-scan-pass-product-useby").style.display = "block";
        }
        document.getElementById("left-part-during-scan").style.display = "none";
        document.getElementById("left-part-after-scan-fail").style.display = "block";   
    }

    function scanfail(response) {
        document.getElementById("container").style.backgroundColor = "#FFCACA";
        document.getElementById("body").style.backgroundColor = "#FFCACA";
        document.getElementsByClassName('dropdown-button')[0].style.backgroundColor="#FFCACA";
        document.getElementById("ifu-scan").style.display="none";
        document.getElementById("ifu-workorder").style.display="none";
        document.getElementById("after-fail-side-scan").style.display="block";
        document.getElementById("after-pass-workorder").style.display="block";
        document.getElementById("rescanBtn").style.display = "block";
       
        if(responseData.gtinMismatch == true){
            gtinmismatchblink();
        }
        else{
            mismatchblink();
        }
       
    }
    function gtinmismatchblink(){
       document.getElementById("during-scan-gtin-1").style.display = "none";
       document.getElementById("after-scan-fail-gtin-1").style.display = "block";
         if (responseData.lotNoMismatches == true) {
            document.getElementById("during-scan-lot-no1").style.display ="none";
           document.getElementById("after-scan-fail-lot-no1").style.display ="block";

            }
            else {
           document.getElementById("during-scan-lot-no1").style.display ="none";
           document.getElementById("after-scan-pass-lot-no1").style.display ="block";

            }
         
            if (responseData.secondUseby_Mismatch == true) {
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-fail-product-useby").style.display = "block";

            }
            else {
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-pass-product-useby").style.display = "block";
            }

            if (responseData.ifuMismatch == true) {
            document.getElementById("during-scan-ifu").style.display = "none";
            document.getElementById("after-scan-fail-ifu").style.display = "block";
            }

            else {
             document.getElementById("during-scan-ifu").style.display = "none";
            document.getElementById("after-scan-pass-ifu").style.display = "block";
            } 
            showPopup();
    }

   function mismatchblink(){
       
        if (responseData.mismatches.lotNoMismatch == true) {
           document.getElementById("during-scan-lot-no1").style.display ="none";
           document.getElementById("after-scan-fail-lot-no1").style.display ="block";
        }

        else {
            document.getElementById("during-scan-lot-no1").style.display ="none";
           document.getElementById("after-scan-pass-lot-no1").style.display ="block";
        }

        if (responseData.mismatches.calculatedUseByMismatch == true) {
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-fail-product-useby").style.display = "block";
        }

        else {
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-pass-product-useby").style.display = "block";
        }

        if (responseData.mismatches.ifumismatches == true) {
            document.getElementById("during-scan-ifu").style.display = "none";
            document.getElementById("after-scan-fail-ifu").style.display = "block";
        }

        else {
            document.getElementById("during-scan-ifu").style.display = "none";
            document.getElementById("after-scan-pass-ifu").style.display = "block";
        }
        if(responseData.mismatches.gtinMismatch == true){
            document.getElementById("during-scan-gtin-1").style.display = "none";
            document.getElementById("after-scan-fail-gtin-1").style.display = "block";
        }
        else{
            document.getElementById("during-scan-gtin-1").style.display="none";
            document.getElementById("after-scan-pass-gtin-1").style.display = "block";
        }
         showPopup();
    }

    function GtinMismatch(response) {
        if (response.gtinMismatch) {
            // Increment both values by 1
            document.getElementById("total-val").innerHTML = parseInt(document.getElementById("total-val").innerHTML) + 1;
            document.getElementById("total-failed-val").innerHTML = parseInt(document.getElementById("total-failed-val").innerHTML) + 1;
        }
        document.getElementById("popupContainer1").style.display = "none";
        document.getElementById("scanning-icon-div").style.backgroundColor = "#FFB5B5";

        document.getElementById("before-scan-text").style.display = "none";
        document.getElementById("after-scan-fail-text1").style.display = "flex";

        document.getElementById("before-scan-image").style.display = "none";
        document.getElementById("after-scan-fail-image").style.display = "block";

        document.getElementById("during-scan-gtin").style.display = "none";
        document.getElementById("after-scan-fail-gtin").style.display = "block";
        if (response.dB_GTIN_Mismatch) {
            document.getElementById("during-scan-dbgtin-no").style.display = "none";
            document.getElementById("after-scan-fail-dbgtin-no").style.display = "block";
        }
        else {
            document.getElementById("during-scan-dbgtin-no").style.display = "block";
        }
        if (response.lotnoMismatch) {
            document.getElementById("during-scan-lot-no").style.display = "none";
            document.getElementById("after-scan-fail-lot-no").style.display = "block";
        }
        else {
            document.getElementById("during-scan-lot-no").style.display = "block";
        }
        if (response.labelMismatch) {
            document.getElementById("after-scan-fail-label-spec").style.display = "block";
            document.getElementById("during-scan-label-spec").style.display = "none";
        } else {
            document.getElementById("during-scan-label-spec").style.display = "block";
        }
        if (response.firstUseby_Mismatch) {
            document.getElementById("during-scan-use-date").style.display = "none";
            document.getElementById("after-scan-fail-use-date").style.display = "block";
        }
        else {
            document.getElementById("during-scan-use-date").style.display = "block";
        }
        if (response.catalogMismatch) {
            document.getElementById("during-scan-catalog").style.display = "none";
            document.getElementById("after-scan-fail-catalog").style.display = "block";
        }
        else {
            document.getElementById("during-scan-catalog").style.display = "block";
        }
        if (response.lotNoMismatches) {
            document.getElementById("during-scan-lot-no1").style.display = "none";
            document.getElementById("after-scan-fail-lot-no1").style.display = "block";
        }
        else {
            document.getElementById("during-scan-lot-no1").style.display = "block";
        }
        if (response.ifuMismatch) {
            document.getElementById("after-scan-fail-ifu").style.display = "block";
            document.getElementById("during-scan-ifu").style.display = "none";
        }
        else {
            document.getElementById("during-scan-ifu").style.display = "block";
        }
        if (response.secondUseby_Mismatch) {
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-fail-product-useby").style.display = "block";
        }
        else {
            document.getElementById("during-scan-product-useby").style.display = "block";
        }
        document.getElementById("left-part-during-scan").style.display = "none";
        document.getElementById("left-part-after-scan-fail").style.display = "block";
        $("#btn-end > div").addClass("disabled").off('click');
    }


    function ScanFailToSupervisor() {
        document.getElementById("popupContainer").style.display = "none";
    }
      function ScanFailToSupervisor1() {
        document.getElementById("popupContainer1").style.display = "none";

    }
    

    function resetPassScenario() {
        document.getElementById("popupContainer1").style.display = "none";
        document.getElementById("after-scan-pass-lot-no").style.display = "none";
        document.getElementById("before-scan-lot-no").style.display = "block";

        document.getElementById("after-scan-pass-gtin").style.display = "none";
        document.getElementById("before-scan-gtin").style.display = "block";

        document.getElementById("after-scan-pass-cat-no").style.display = "none";
        document.getElementById("before-scan-cat-no").style.display = "block";

        document.getElementById("after-scan-pass-label-spec").style.display = "none";
        document.getElementById("before-scan-label-spec").style.display = "block";

        document.getElementById("after-scan-pass-use-date").style.display = "none";
        document.getElementById("before-scan-use-date").style.display = "block";

        document.getElementById("left-part-after-scan-pass").style.display = "none";
        document.getElementById("left-part-before-scan").style.display = "block";

        document.getElementById("next-scan-button").style.backgroundColor = "#C5C5C5";
    }

    function showPopup() {
        document.getElementById("popupContainer1").style.display = "block";
        superVisorInput = true;
    }
    function showPopup1() {
        document.getElementById("popupContainer").style.display = "block";
        superVisorInput = true;
    }
    
    function closePopup() {
        document.getElementById("popupContainer1").style.display = "none";
        superVisorInput = false;
    }
    function closePopup1() {
        document.getElementById("popupContainer").style.display = "none";
        superVisorInput = false;
    }


    var isIfuEditable = false;
    var submitBtn = document.getElementById("submitBtn");
    var productLabelInput = document.getElementById("productLabelInput");
    var productLabelSpec = document.getElementById("productLabelSpec");
    var ifu = document.getElementById("ifu");

    submitBtn.addEventListener("click", function () {
        if (!isIfuEditable) {
            // First click behavior
            var productLabel = productLabelInput.value;
            var spec = productLabelSpec.value;
            
            if (productLabelInput.value === '' && productLabelInput.hasAttribute('required')) {
                displayValidationError("productLabelInput", "Product Label Input is Invalid Format");
            }

            if (productLabelSpec.value === '' && productLabelSpec.hasAttribute('required')) {
                displayValidationError1("productLabelSpec", "Product Label spec Input is Invalid Format");
            }


            // Save the values for the second click
            submitBtn.dataset.productLabel = productLabel;
            submitBtn.dataset.productLabelSpec = spec;

            isIfuEditable = true; // Enable "ifu" input for the second click

            // Enable the "ifu" input
            ifu.disabled = false;
            document.getElementById("before-side-scan").style.display="none";
            document.getElementById("before-workorder").style.display="none";
            document.getElementById("ifu-scan").style.display = "block";
            document.getElementById("ifu-workorder").style.display = "block";
            // Disable other inputs
            productLabelInput.disabled = true;
            productLabelSpec.disabled = true;
        }

        else {
            // Second click behavior
            var productLabel = submitBtn.dataset.productLabel;
            var spec = submitBtn.dataset.productLabelSpec;
            var scannedIfu = ifu.value;
            if(ifu.value ==='' && ifu.hasAttribute('required')){
                var errorDivId = document.getElementById("ifu"); // Generate the error div id based on the input field id
                var errorDiv = document.getElementById("productLabelInputError2");
                var errorMessage = "Ifu Input is Invalid Format";
                if (errorDiv) {
                    errorDiv.textContent = errorMessage;
                    setTimeout(function () {
                        errorDiv.textContent = "";
                        location.reload();
                    }, 5000); 
                    return;
                }
            }

           
            $("#productLabelInput, #productLabelSpec,#ifu, #submitBtn").prop("disabled", true);

            var apiUrl = "/SaveProductLabelBarcode";
            beforeToDuringScan();
            $.ajax({
                url: apiUrl,
                method: "POST",
                data: { input1: productLabel, input2: spec, input3: scannedIfu },
                success: function (response) {
                    console.log(response);
                    if (response.gtinMismatch) {
                        responseData = response;
                        scanfail(response);
                    } else {
                        responseData = response;
                        processResponse(response);
                    }
                    IFUScanActive = true;
                },
                error: function (xhr, status, error) {
                    if (xhr.responseJSON && xhr.responseJSON.errorMessage) {
                        var errorMessage = xhr.responseJSON.errorMessage;
                        $("#productLabelInputError").text(errorMessage);
                        setTimeout(function () {
                            $("#productLabelInputError").text("");
                            location.reload();
                        }, 5000);
                    } else {
                        console.log("An error occurred while making the AJAX call:", error);
                    }
                },
                complete: function () {
                    // Re-enable the input fields and button after the AJAX request is complete
                    $("#productLabelInput, #productLabelSpec,#ifu, #submitBtn").prop("disabled", true);
                }

            });


        }
    });

    function displayValidationError(inputId, errorMessage) {
        var errorDivId = inputId + "productLabelInput"; // Generate the error div id based on the input field id
        var errorDiv = document.getElementById("productLabelInputError");

        if (errorDiv) {
            errorDiv.textContent = errorMessage;
            setTimeout(function () {
                errorDiv.textContent = "";
                location.reload();
            }, 5000);
        }
    }


    function displayValidationError1(inputId, errorMessage) {
        var errorDivId = inputId + "productLabelSpec"; // Generate the error div id based on the input field id
        var errorDiv = document.getElementById("productLabelInputError1");

        if (errorDiv) {
            errorDiv.textContent = errorMessage;
            setTimeout(function () {
                errorDiv.textContent = "";
                location.reload();
            }, 5000);
        }
    }


  let rescanmessage = false;
  let boxingrescan = false;
  $(document).on("click", "#rescanBtn", function () {
    rescanmessage = true;
    boxingrescan = true;
    var apiUrl = "/Home/Rescan";
    $.ajax({
        url: apiUrl,
        method: "POST",
            data: { rescanmsg: rescanmessage, value: boxingrescan },
        success: function (response) {
            console.log(response);
            if (response.cartonMismatch == true) {
                window.location.href = "/Home/CartonLabelScan";
            } else {
               location.reload();
               return;
            }
        },
        error: function (xhr, status, error) {
            console.log("An error occurred while making the AJAX call:", error);
        }
    });
 });


    function processResponse(response) {
        console.log("response hit");
        console.log(response.allMatch);
        if (response.allMatch == true) {
            //setTimeout(duringToScanPass, 3000);
            duringToScanPass();
            setScannedData(response);
        } else {
            //setTimeout(duringToScanFail, 3000);
            scanfail(response);
        }
        setWorkOrderInfo(response); 
    }

    function setScannedData(response) {
         console.log("set data called");
         console.log(response);
         document.getElementById('fail-wo-catalog-no-error').innerHTML = response.rhsData.dbCatalogNo;
         document.getElementById('fail-product-use-by').innerHTML = response. rhsData.calculateUseBy;
         document.getElementById('fail-wo-lot-no').innerHTML = response.lhsData.woLotNo;
         document.getElementById('fail-carton-lot-no').innerHTML = response.lhsData.cartonLotNo;
         document.getElementById('fail-db-gtin').innerHTML = response.rhsData.dbGTIN;
         document.getElementById('fail-product-label-spec').innerHTML = response.rhsData.dbLabelSpec;   
         document.getElementById('fail-calc-use-by-1').innerHTML = response.lhsData.cartonUseBy;
         document.getElementById('fail-product-db-ifu').innerHTML = response.rhsData.dbIFU;
         document.getElementById('fail-db-gtin-2').innerHTML = response.lhsData.cartonGTIN;
         
            
         
         document.getElementById('fail-db-catalog-num').innerHTML = response.lhsData.woCatalogNumber;
         document.getElementById('fail-calc-use-by').innerHTML = response.lhsData.cartonUseBy;
         document.getElementById('fail-carton-lot-no-1').innerHTML =response.lhsData.cartonLotNo;
         document.getElementById('fail-product-lot-no1').innerHTML = response.rhsData.productLotNo;
         document.getElementById('fail-label-gtin1').innerHTML = response.lhsData.cartonGTIN;
         document.getElementById('fail-db-label-spec').innerHTML = response.lhsData.cartonLabelSpec;
         document.getElementById('fail-product-useby').innerHTML = response.rhsData.productUseBy;
         document.getElementById('fail-ifu').innerHTML = response.lhsData.scannedIFU;
         document.getElementById('fail-label-gtin2').innerHTML = response.rhsData.productLabelGTIN;
    }
    function setScannedFailData1(response) {
        console.log("set data for fail called");
      if (responseData.lotNoMismatches == true) {
            document.getElementById("fail-carton-lot-no").innerHTML = responseData.carton_Lot_No;
            document.getElementById("fail-product-lot-no1").style.color = "red";
            document.getElementById("fail-product-lot-no1").innerHTML = responseData.product_Lot_No;
            document.getElementById("p-lotnum").style.color = "red";
            document.getElementById("during-scan-lot-no1").style.display = "none";
            document.getElementById("after-scan-fail-lot-no1").style.display = "block";
        }
        else {
            document.getElementById("fail-carton-lot-no").innerHTML = responseData.carton_Lot_No;
            document.getElementById("fail-product-lot-no1").style.color = "black";
            document.getElementById("fail-product-lot-no1").innerHTML = responseData.product_Lot_No;
            document.getElementById("during-scan-lot-no1").style.display = "none";
            document.getElementById("after-scan-pass-lot-no1").style.display = "block";
        }

        if (responseData.secondUseby_Mismatch == true) {
            document.getElementById("fail-calc-use-by-1").innerHTML = responseData.carton_Use_By;
            document.getElementById("fail-product-useby").innerHTML = responseData.pro_Use_By;
            document.getElementById("fail-product-useby").style.color = "red";
            document.getElementById("p-useby1").style.color = "red";
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-fail-product-useby").style.display = "block";
        }
        else {
            document.getElementById("fail-calc-use-by-1").innerHTML = responseData.carton_Use_By;
            document.getElementById("fail-product-useby").style.color = "black";
            document.getElementById("fail-product-useby").innerHTML = responseData.pro_Use_By;
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-pass-product-useby").style.display = "block";
        }
       
        if (responseData.ifuMismatch == true) {
            document.getElementById("fail-product-db-ifu").innerHTML =responseData.db_Ifu;
            document.getElementById("fail-ifu").innerHTML =responseData.scanned_Ifu;
            document.getElementById("fail-ifu").style.color = "red";
            document.getElementById("during-scan-ifu").style.display = "none";
            document.getElementById("after-scan-fail-ifu").style.display = "block";
        }
        else {
            document.getElementById("fail-product-db-ifu").innerHTML = responseData.db_Ifu;
            document.getElementById("fail-ifu").innerHTML = responseData.scanned_Ifu;
            document.getElementById("fail-ifu").style.color = "black";
            document.getElementById("during-scan-ifu").style.display ="none";
            document.getElementById("after-scan-pass-ifu").style.display ="block";
        }
        if(responseData.gtinMismatch == true){
            document.getElementById('fail-db-gtin-2').innerHTML = responseData.carton_gtin;
            document.getElementById('fail-label-gtin2').innerHTML = responseData.product_Gtin;
            document.getElementById('fail-label-gtin2').style.color = "red";
            document.getElementById('p-gtin-1').style.color = "red";
            document.getElementById('during-scan-gtin-1"').style.display = "none";
            document.getElementById('after-scan-fail-gtin-1').style.display="block";
        }
        else{
             document.getElementById('fail-db-gtin-2').innerHTML = responseData.carton_gtin;
             document.getElementById('fail-label-gtin2').innerHTML = responseData.product_Gtin;
             document.getElementById('during-scan-gtin-1"').style.display = "none";
             document.getElementById('after-scan-pass-gtin-1').style.display = "block";
        }
    }




    
    function setScannedFailData(response, mismatches) {
        console.log("set data for fail called");
        if(response.gtinMismatch){
            document.getElementById("total-val").innerHTML = parseInt(document.getElementById("total-val").innerHTML) + 1;
            document.getElementById("total-failed-val").innerHTML = parseInt(document.getElementById("total-failed-val").innerHTML) + 1;
            setScannedFailData1();
        }
        else{
         document.getElementById('fail-carton-lot-no').innerHTML = response.lhsData.cartonLotNo;
         document.getElementById('fail-calc-use-by-1').innerHTML = response.lhsData.cartonUseBy;
         document.getElementById('fail-product-db-ifu').innerHTML = response.rhsData.dbIFU;
       
         if (mismatches.lotNumberMisMatch) {
            document.getElementById("fail-product-lot-no1").innerHTML = response.rhsData.productLotNo;
            document.getElementById("fail-product-lot-no1").style.color = "red";
            document.getElementById("p-lotnum").style.color = "red";
             document.getElementById("during-scan-lot-no1").style.display = "none";
            document.getElementById("after-scan-fail-lot-no1").style.display = "block";
        }
        else {
            document.getElementById("fail-product-lot-no1").innerHTML = response.rhsData.productLotNo;
            document.getElementById("fail-product-lot-no1").style.color = "black";
            document.getElementById("during-scan-lot-no1").style.display = "none";
            document.getElementById("after-scan-pass-lot-no1").style.display = "block";
        }
        
        if (mismatches.calculatedUseByMismatch) {
            document.getElementById("fail-product-useby").innerHTML = response.rhsData.productUseBy;
            document.getElementById("fail-product-useby").style.color = "red";
            document.getElementById("p-useby1").style.color = "red";
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-fail-product-useby").style.display = "block";
        }
        else {
            document.getElementById("fail-product-useby").innerHTML = response.rhsData.productUseBy;
            document.getElementById("fail-product-useby").style.color = "black";
            document.getElementById("during-scan-product-useby").style.display = "none";
            document.getElementById("after-scan-pass-product-useby").style.display = "block";
        }
       
       
        if (mismatches.ifumismatches) {
            document.getElementById('fail-ifu').innerHTML = response.lhsData.scannedIFU;
            document.getElementById("fail-ifu").style.color = "red";
            document.getElementById("p-ifu").style.color = "red";
            document.getElementById("during-scan-ifu").style.display = "none";
            document.getElementById("after-scan-fail-ifu").style.display = "block";
        }
        else {
            document.getElementById('fail-ifu').innerHTML = response.lhsData.scannedIFU;
            document.getElementById("fail-ifu").style.color = "black";
            document.getElementById("during-scan-ifu").style.display ="none";
            document.getElementById("after-scan-pass-ifu").style.display ="block";

            }
            if(mismatches.gtinMismatch){
            document.getElementById('fail-db-gtin-2').innerHTML = response.lhsData.cartonGTIN;
            document.getElementById('fail-label-gtin2').innerHTML = response.rhsData.productLabelGTIN;
            document.getElementById('fail-label-gtin2').style.color = "red";
            document.getElementById('p-gtin-1').style.color = "red";
            document.getElementById('during-scan-gtin-1').style.display = "none";
            document.getElementById('after-scan-fail-gtin-1').style.display="block";

            }
            else
            {
             document.getElementById('fail-db-gtin-2').innerHTML = response.lhsData.cartonGTIN;
             document.getElementById('fail-label-gtin2').innerHTML = response.rhsData.productLabelGTIN;
             document.getElementById('during-scan-gtin-1').style.display = "none";
             document.getElementById('after-scan-pass-gtin-1').style.display = "block";
            }
    }
  }

    function setWorkOrderInfo(response) {
        console.log(response);
        document.getElementById("total-val").innerHTML = response.workOrderInfo.totalCount != null ? response.workOrderInfo.totalCount : 0;
        document.getElementById("total-passed-val").innerHTML = response.workOrderInfo.passedCount != null ? response.workOrderInfo.passedCount : 0;
        document.getElementById("total-failed-val").innerHTML = response.workOrderInfo.failedCount != null ? response.workOrderInfo.failedCount : 0;
        document.getElementById("total-rescanned-val").innerHTML = response.workOrderInfo.scannedCount != null ? response.workOrderInfo.scannedCount : 0;
        console.log(response.workOrderInfo.scannedCount);
    }
    function redbutton(inputFieldId) {
        showLoader();
        var supervisorId = $('#' + inputFieldId).val();

        $.ajax({
            type: 'POST',
            url: '/Home/CheckSupervisorId',
            data: { supervisorEmpId: supervisorId },
            success: function (data) {
                if (data === true) {
                    hideLoader();
                    closePopup();
                    ScanFailToSupervisor1();            
                    setScannedFailData(responseData, responseData.mismatches);
                    $('#' + inputFieldId).val('');
                } else {
                    hideLoader();
                    // Supervisor ID is invalid, show an error message
                    var errorMessage = 'Supervisor ID is invalid. Please enter a valid ID.';
                    $('#popupContent1').find('.error-message').text(errorMessage);
                    $('#' + inputFieldId).val('');
                }
            },
            error: function (xhr, status, error) {
                console.log("An error occurred while making the AJAX call:", error);
            }
        });
    }
    function greenButton(inputFieldId) {
        showLoader();
        var supervisorId = $('#' + inputFieldId).val();

        $.ajax({
            type: 'POST',
            url: '/Home/CheckSupervisorId',
            data: { supervisorEmpId: supervisorId },
            success: function (data) {
                if (data === true) {
                    hideLoader();
                    closePopup1();
                    ScanFailToSupervisor();        
                    $('#' + inputFieldId).val('');
                } else {
                    hideLoader();
                    // Supervisor ID is invalid, show an error message
                    var errorMessage = 'Supervisor ID is invalid. Please enter a valid ID.';
                    $('#popupContent1').find('.error-message').text(errorMessage);
                    $('#' + inputFieldId).val('');
                }
            },
            error: function (xhr, status, error) {
                console.log("An error occurred while making the AJAX call:", error);
            }
        });
    }





    var udpMessageValue = false;
   $('#nxt-scn-btn').on('click', function (e) {
    e.preventDefault();
    udpMessageValue = true;
   var workOrderValue = localStorage.getItem("workOrderValue");
   $.ajax({
            url: '/Home/SaveWorkOrderBarcode', // Replace with the correct URL
            method: 'POST', // Use POST or GET as appropriate
            data: { input: workOrderValue, udpMsg: udpMessageValue },
            success: function (response) {
                // Handle the response from the controller here
                console.log(response);
                 if (response.redirectTo) {
            window.location.href = response.redirectTo; // Redirect based on the response
        }
            },
            error: function (error) {
                // Handle any errors here   
                console.error(error);
            }
        });
 });


    function showLoader() {
        document.getElementById('loader').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
    }

    // Function to hide the loader and overlay
    function hideLoader() {
        document.getElementById('loader').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
    }

    //function initiateWebsocket() {

    var socket = null;
    if (true) {
        websocketUrl = "ws://localhost:7157" + "/ws";

        socket = new WebSocket(websocketUrl);

        socket.onerror = function (event) {
            console.log(event);

        };
        
        socket.onmessage = function (event) {
            const jsonData = event.data;
            const data = JSON.parse(jsonData);
            console.log(data.pageData);
            if (superVisorInput == false && data.pageData != null && (document.getElementById("productLabelInput").value == '' || document.getElementById("productLabelSpec").value == '')) {
                //console.log(data.pageData.Barcode);
                if (data.pageData.Barcode.length < 25) {
                    document.getElementById("productLabelSpec").value = data.pageData.Barcode;
                } else {
                    document.getElementById("productLabelInput").value = data.pageData.Barcode;
                }
                if (document.getElementById("productLabelInput").value !== '' && document.getElementById("productLabelSpec").value !== '') {
                    //IFUScanActive = true;
                    console.log("Submitting First Time");
                    data.pageData = null;
                    document.getElementById("submitBtn").click();
                }
            }
            console.log(isIfuEditable);
            if (data.pageData != null && isIfuEditable == true && superVisorInput == false) {
                console.log("Filling UP IFU");
                    //console.log(data.pageData.Barcode);
                    document.getElementById("ifu").value = data.pageData.Barcode;
                //IFUScanActive = false;
                    document.getElementById("submitBtn").click();
            }
            if(data.pageData != null && superVisorInput == true){
                document.getElementById("supervisorInput").value = data.pageData.Barcode;
                greenButton('supervisorInput');
            }
            
            

            //document.getElementById("productLabelInput").value = data.pageError.errorMsg;
            //document.getElementById("productLabelSpec").value = data.pageError.errorMsg;
            //document.getElementById("submitBtn").click();
            

            document.getElementById("greenButton").addEventListener("click", function () {
                document.getElementById("greenButton").value = data.pageError.errorMsg;
                greenbutton('supervisorInput');
            });

            document.getElementById("redButton").addEventListener("click", function () {
                document.getElementById("redButton").value = data.pageError.errorMsg;
                redbutton('supervisorInput1');

            });
        }

        socket.onopen = function (event) {
            // WebSocket connection opened
            console.log('WebSocket connection opened');
        };

        socket.onclose = function (event) {
            // WebSocket connection closed
            console.log('WebSocket connection closed');
            socket = new WebSocket(websocketUrl);
        };
    }
    //}
    function displayToast() {
            if (toastVisible) {
                var toast = document.getElementById("toast");
                toast.style.visibility = "visible";
                toastVisible = false; // Set to false to hide the message

                setTimeout(function () {
                    toast.style.visibility = "hidden";
                    isPaused = false;
                }, pauseDuration * 1000); // Display the toast message for 1 minute
            }
        }


    //code for session counter
    function startTimer(duration) {
         if (!isPaused){
        var timerDisplay = document.getElementById("timer");

        var timer = duration;
        var hours, minutes, seconds;

         intervalId = setInterval(function () {
            hours = parseInt(timer / 3600, 10);
            minutes = parseInt((timer % 3600) / 60, 10);
            seconds = parseInt(timer % 60, 10);

            hours = hours < 10 ? "0" + hours : hours;
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            timerDisplay.textContent = hours + ":" + minutes + ":" + seconds;
            if (timer == 1800) {
                    if (!timerHasStarted) {
                        displayToast();
                        timerHasStarted = true;
                        isPaused = true;
                    }
                }
            if (--timer < 0) {
                clearInterval(intervalId);
                // Perform any action you need when the timer reaches 00:00:00
                window.location.href = "/Login/Logout";
                //alert("Timer has expired!");
            }
        }, 1000);
        }
    }

    // Local Storage is already set in homescreen so just obtain it here
    var expirationTime = localStorage.getItem("expiration_time");


    // Get the expiration time from localStorage
    var currentTime = Math.floor(Date.now() / 1000);
    var remainingTime = expirationTime - currentTime;
    startTimer(remainingTime);
</script>